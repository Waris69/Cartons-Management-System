<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Carton Management App</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <h1>üì¶ Carton Management</h1>

        <!-- Lifetime -->
        <div class="stats">
            <div class="stat">
                <p>Lifetime Cartons</p>
                <h2 id="lifeCartons">0</h2>
            </div>
            <div class="stat">
                <p>Lifetime Revenue</p>
                <h2>Rs <span id="lifeRevenue">0</span></h2>
            </div>
        </div>

        <!-- Current Carton -->
        <div class="stats">
            <div class="stat">
                <p>Total</p>
                <h2>Rs <span id="total">0</span></h2>
            </div>
            <div class="stat received">
                <p>Received</p>
                <h2>Rs <span id="received">0</span></h2>
            </div>
            <div class="stat remaining">
                <p>Remaining</p>
                <h2>Rs <span id="remaining">0</span></h2>
            </div>
        </div>

        <!-- Actions -->
        <div class="actions">
            <button onclick="openCartonPopup()">‚ûï Add Carton</button>
            <button onclick="addEntry()">‚ûï Add Packet Entry</button>
            <button onclick="toggleHistoryView()">üìú View History</button>
            <button onclick="openDailyHistory()">View Daily History</button>
        </div>

        <!-- Entries -->
        <div id="entries" class="entries"></div>

        <!-- Manual Receive -->
        <div class="manual">
            <input type="number" id="manualAmount" placeholder="Manual Receive Amount">
            <button onclick="manualReceive()">Add</button>
        </div>

        <!-- Close -->
        <div class="close">
            <button id="closeBtn" onclick="closeCarton()" disabled>‚úÖ Close Carton</button>
        </div>

        <!-- History View -->
        <div id="historyView" class="history-view" style="display: none;">
            <div class="history-header">
                <h2>üìú Carton History</h2>
                <button onclick="toggleHistoryView()">‚Üê Back to Current</button>
            </div>
            <div id="historyContent" class="history-content">
                <div class="loading-history">Loading history...</div>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <!-- Add Carton Popup -->
    <div class="popup" id="cartonPopup">
        <div class="popup-content">
            <h3>Add Carton</h3>
            <input id="packetCount" type="number" placeholder="Number of Packets">
            <button onclick="saveCarton()">Save</button>
        </div>
    </div>

    <div id="dailyHistoryPopup" class="popup-overlay">
        <div class="popup-box">
            <h2>Daily History</h2>
            <div id="dailyHistoryContent"></div>
            <button onclick="closeDailyHistory()">Close</button>
        </div>
    </div>


    <!-- Packet Entry Popup -->
    <div class="popup" id="entryPopup">
        <div class="popup-content">
            <h3 id="entryTitle">Add Packet Entry</h3>
            <input id="entryName" placeholder="Customer Name">
            <input id="entryPackets" type="number" placeholder="Packets">
            <input id="entryAmount" type="number" placeholder="Amount">
            <button onclick="saveEntry()">Save</button>
        </div>
    </div>

    <!-- Customer Ledger Popup -->
    <div id="customerPopup" class="popup-overlay">
        <div class="popup-box">
            <h2 id="customerTitle">Customer Ledger</h2>

            <div id="customerSummary" class="summary-box"></div>

            <div id="customerHistory" class="ledger-list"></div>

            <button class="close-btn" onclick="closeCustomerPopup()">Close</button>
        </div>
    </div>


    <script type="module" src="script.js"></script>
</body>

</html>
